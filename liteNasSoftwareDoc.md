好的！下面是一个**丰富且结构化的嵌入式轻NAS管理软件项目文档**，涵盖功能、架构、部署、开发、API、常见问题等，适合开发者和用户参考。

---

# 嵌入式轻NAS管理软件 项目文档

## 目录

1. [项目简介](#项目简介)
2. [主要特性](#主要特性)
3. [系统架构](#系统架构)
4. [快速开始](#快速开始)
5. [部署说明](#部署说明)
6. [使用说明](#使用说明)
7. [前端功能说明](#前端功能说明)
8. [后端API文档](#后端api文档)
9. [数据库结构](#数据库结构)
10. [开发与贡献](#开发与贡献)
11. [常见问题FAQ](#常见问题faq)
12. [致谢与开源协议](#致谢与开源协议)

---

## 项目简介

本项目是一个面向嵌入式设备、树莓派、家庭服务器等场景的轻量级NAS管理系统。集成了多用户管理、Docker容器/应用管理、文件管理、壁纸美化、国际化、资源监控等功能，界面美观，易于上手，支持多平台部署。

---

## 主要特性

- **多用户注册/登录/权限管理**（管理员/普通用户）
- **应用商店**：一键安装/管理Docker应用
- **容器/镜像管理**：启动、停止、删除、拉取
- **文件管理器**：集成filebrowser，自动用户同步
- **壁纸美化**：支持右键弹窗式壁纸切换
- **资源监控**：CPU、内存、磁盘、RAID、网络状态实时展示
- **国际化**：中英文切换
- **日志与通知**：操作日志、Toast消息提醒
- **响应式UI**：Bootstrap 5 + 自定义美化
- **安全**：强密码、CSRF防护、权限校验
- **易部署**：支持Docker Compose一键部署

---

## 系统架构

```
+-------------------+      +-------------------+
|   前端 (HTML/JS)  | <--> |   Flask后端API    |
+-------------------+      +-------------------+
         |                          |
         v                          v
+-------------------+      +-------------------+
|  filebrowser集成  |      |   SQLite数据库    |
+-------------------+      +-------------------+
         |                          |
         v                          v
+-------------------+      +-------------------+
|   Docker引擎      |      |   静态资源/壁纸   |
+-------------------+      +-------------------+
```

---

## 快速开始

### 1. 克隆项目

```bash
git clone https://github.com/yourname/embedded-nas-manager.git
cd embedded-nas-manager
```

### 2. 配置环境变量

复制 `.env.example` 为 `.env`，并根据需要修改配置。

### 3. 初始化数据库

```bash
python app.py --init-db
# 或手动运行数据库迁移脚本
```

### 4. 启动服务

```bash
python app.py
# 或使用 Docker Compose
docker-compose up -d
```

### 5. 访问Web界面

浏览器访问 [http://localhost:5000](http://localhost:5000)

---

## 部署说明

### Docker Compose 部署

1. 编辑 `docker-compose.yml`，配置端口、卷映射等。
2. 运行 `docker-compose up -d`
3. 默认账号：admin / admin123456789

### 依赖环境

- Python 3.8+
- Flask, Flask-Login, Flask-Babel, Docker SDK, psutil, werkzeug
- SQLite3
- Docker（建议20.10+）

---

## 使用说明

### 用户管理

- 支持注册、登录、登出
- 管理员可管理用户、分配权限

### 应用商店

- 管理员可添加/编辑/删除应用
- 一键安装Docker应用，实时显示安装进度

### 文件管理

- 集成filebrowser，支持多用户自动同步
- 支持Web端文件上传/下载/管理

### 壁纸美化

- 右键页面背景弹出壁纸选择器
- 支持自定义上传壁纸（可扩展）

### 资源监控

- 实时显示CPU、内存、磁盘、RAID、网络等信息

### 国际化

- 支持中英文切换

---

## 前端功能说明

- **响应式布局**，适配PC/平板/手机
- **模态框管理**，所有弹窗均自动清理遮罩
- **壁纸选择器**，右键弹窗，点击即换
- **Toast消息**，操作结果即时反馈
- **三点菜单**，卡片操作菜单美观易用

---

## 后端API文档

### 用户相关

- `POST /register` 注册
- `POST /login` 登录
- `GET /logout` 登出

### 应用/容器相关

- `GET /api/get_apps` 获取应用列表
- `POST /api/add_app` 添加应用
- `POST /api/delete_app` 删除应用
- `POST /api/update_app` 编辑应用
- `POST /api/install_app` 安装应用
- `GET /api/install_progress` 安装进度

### 壁纸相关

- `GET /api/wallpaper_list` 获取壁纸列表和当前壁纸
- `POST /api/set_wallpaper` 设置当前壁纸

### 资源监控

- `GET /api/resource` 获取CPU/内存/磁盘/RAID/网络状态

---

## 数据库结构

### users 表

| 字段名         | 类型      | 说明         |
| -------------- | --------- | ------------|
| id             | INTEGER   | 主键        |
| username       | TEXT      | 用户名      |
| password_hash  | TEXT      | 密码哈希    |
| is_admin       | INTEGER   | 是否管理员  |
| wallpaper      | TEXT      | 壁纸文件名  |

---

## 开发与贡献

### 代码结构

- `app.py`         主后端逻辑
- `templates/`     前端模板
- `static/`        静态资源（壁纸、JS、CSS等）
- `config.py`      配置管理
- `docker-compose.yml`  Docker部署

### 贡献指南

1. Fork本项目
2. 新建分支开发功能
3. 提交PR，描述清楚变更内容
4. 代码需有详细注释和文档

### 本地开发调试

- 推荐使用 VSCode + Python 插件
- 支持热重载

---

## 常见问题FAQ

**Q: 管理员初始账号密码是多少？**  
A: admin / admin123456789

**Q: 如何添加自定义壁纸？**  
A: 将图片放入 `static/wallpapers/` 目录，或扩展上传功能。

**Q: 壁纸右键没反应？**  
A: 请确保后端已实现 `/api/wallpaper_list` 和 `/api/set_wallpaper` 接口，并已添加壁纸字段。

**Q: Docker容器无法启动？**  
A: 请检查Docker服务是否正常，端口和卷映射是否正确。

**Q: 如何切换语言？**  
A: 右上角语言菜单选择中文/English。

**Q: 如何扩展应用商店？**  
A: 管理员可在应用商店页面添加/编辑/删除应用，支持自定义Docker镜像、端口、环境变量等。

---

## 致谢与开源协议

- 感谢所有贡献者和用户的支持与反馈！
- 本项目遵循 MIT 开源协议，版权所有 © 2025 梁宏伟 <lianghongwei>。欢迎自由使用和二次开发。

---

如需更详细的开发者文档、API示例、二次开发教程等，请随时告知！
